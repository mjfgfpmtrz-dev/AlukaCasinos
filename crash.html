<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Crash</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: Inter, system-ui, sans-serif;
}

body {
  background: radial-gradient(circle at top, #0b1220, #05070d);
  color: #fff;
  overflow: hidden;
}

/* ===== HEADER ===== */
.header {
  display: flex;
  justify-content: space-between;
  padding: 14px;
  font-size: 14px;
}

.balance {
  background: #0f1a33;
  padding: 8px 12px;
  border-radius: 14px;
  display: flex;
  gap: 8px;
  align-items: center;
}

/* ===== GAME ===== */
.game {
  position: relative;
  width: 100%;
  height: calc(100vh - 160px);
}

/* Multiplier */
#multiplier {
  position: absolute;
  top: 80px;
  width: 100%;
  text-align: center;
  font-size: 48px;
  font-weight: 700;
}

/* Rocket */
#rocket {
  position: absolute;
  left: 50%;
  top: 55%;
  width: 120px;
  transform: translate(-50%, -50%);
  transition: transform 0.08s linear;
  z-index: 2;
}

/* Explosion */
#explosion {
  position: absolute;
  width: 220px;
  height: 220px;
  border-radius: 50%;
  background: radial-gradient(circle, #fff 0%, orange 40%, red 70%, transparent 75%);
  opacity: 0;
  pointer-events: none;
  z-index: 3;
}

.explode {
  animation: boom 0.6s ease-out forwards;
}

@keyframes boom {
  0% { transform: scale(0.2); opacity: 1; }
  100% { transform: scale(2.5); opacity: 0; }
}

/* ===== CONTROLS ===== */
.controls {
  padding: 16px;
}

button {
  width: 100%;
  padding: 16px;
  background: #1f6bff;
  border: none;
  border-radius: 14px;
  color: #fff;
  font-size: 18px;
  font-weight: 600;
}

/* ===== LAST CRASHES ===== */
.last {
  display: flex;
  gap: 10px;
  justify-content: center;
  padding-bottom: 14px;
  opacity: 0.8;
}

.last span {
  font-size: 14px;
}

.red { color: #ff4d4d; }
.green { color: #4dff88; }
</style>
</head>

<body>

<div class="header">
  <div>üë§ 109</div>
  <div class="balance">TON 100.00</div>
</div>

<div class="game">
  <div id="multiplier">1.00x</div>

  <!-- ROCKET SVG -->
  <svg id="rocket" viewBox="0 0 64 64">
    <path fill="#ffffff" d="M32 2C20 14 18 28 18 28l18 18s14-2 26-14C62 10 32 2 32 2z"/>
    <circle cx="36" cy="20" r="4" fill="#0b1220"/>
  </svg>

  <div id="explosion"></div>
</div>

<div class="controls">
  <button>–°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É</button>
</div>

<div class="last" id="lastCrashes"></div>

<script>
/* ===== STATE ===== */
let running = false;
let startTime = 0;
let crashAt = 0;
let multiplier = 1;
let animation;

/* last crashes */
let last = [];

/* elements */
const multiplierEl = document.getElementById("multiplier");
const rocket = document.getElementById("rocket");
const explosion = document.getElementById("explosion");
const lastEl = document.getElementById("lastCrashes");

/* ===== RANDOM CRASH LOGIC ===== */
function generateCrash() {
  const r = Math.random();

  if (r < 0.55) return rand(1.1, 2.0);
  if (r < 0.80) return rand(2.0, 3.5);
  if (r < 0.93) return rand(3.5, 5.0);
  if (r < 0.98) return rand(5.0, 7.0);
  return rand(7.0, 10.0);
}

function rand(min, max) {
  return +(Math.random() * (max - min) + min).toFixed(2);
}

/* ===== MULTIPLIER GROWTH (SLOW START) ===== */
function getMultiplier() {
  const elapsed = (Date.now() - startTime) / 1000;
  return Math.max(1, Math.pow(1.055, elapsed));
}

/* ===== START ROUND ===== */
function startRound() {
  running = true;
  multiplier = 1;
  startTime = Date.now();
  crashAt = generateCrash();

  multiplierEl.innerText = "1.00x";
  rocket.style.display = "block";

  loop();
}

/* ===== GAME LOOP ===== */
function loop() {
  if (!running) return;

  multiplier = getMultiplier();
  multiplierEl.innerText = multiplier.toFixed(2) + "x";

  const x = multiplier * 8;
  const y = multiplier * 10;
  const scale = 1 + multiplier / 12;

  rocket.style.transform =
    `translate(-50%, -50%) translate(${x}px, ${-y}px) scale(${scale})`;

  if (multiplier >= crashAt) {
    crash();
    return;
  }

  animation = requestAnimationFrame(loop);
}

/* ===== CRASH ===== */
function crash() {
  running = false;
  cancelAnimationFrame(animation);

  // save last
  last.unshift(crashAt.toFixed(2));
  last = last.slice(0, 5);
  renderLast();

  // explosion
  const rect = rocket.getBoundingClientRect();
  explosion.style.left = rect.left + rect.width / 2 - 110 + "px";
  explosion.style.top = rect.top + rect.height / 2 - 110 + "px";
  explosion.classList.remove("explode");
  void explosion.offsetWidth;
  explosion.classList.add("explode");

  rocket.style.display = "none";
  multiplierEl.innerText = "";

  setTimeout(startRound, 2500);
}

/* ===== RENDER LAST ===== */
function renderLast() {
  lastEl.innerHTML = "";
  last.forEach(v => {
    const s = document.createElement("span");
    s.innerText = v + "x";
    s.className = v < 2 ? "red" : "green";
    lastEl.appendChild(s);
  });
}

/* ===== INIT ===== */
setTimeout(startRound, 1000);
</script>

</body>
</html>